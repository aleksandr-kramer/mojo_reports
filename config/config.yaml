endpoints:
  attendance: "/attendance"
  marks_current: "/marks/current"
  marks_final: "/marks/final"
  schedule: "/schedule"
  subjects: "/subjects"
  work_forms: "/work_forms"

load:
  daily_window_days: 2 # скользящее окно инкремента, если нет updatedAfter
  weekly_deep_days: 90
  retry:
    max_attempts: 5
    backoff_seconds: 2

timezone: "Europe/Podgorica"

api:
  base_url: "https://adriatic.mojo.education/api/v1"
  default_limit: 500
  timeout_sec: 30
  retry:
    total: 5
    backoff_factor: 0.5
    status_forcelist: [429, 500, 502, 503, 504]
  windows:
    attendance_days_back: 2
    schedule_days_forward: 7
  department_default: 0

excel:
  storage: drive
  drive:
    students_id: "19I55-vBV5CVCQhqsD4TAQK7pfQaBdwSB"
    parents_id: "1IMCCO_e8o5JDP1OpGotNeQf07305eFM6"
    classes_id: "1f-PkrPH4fGTvPUZvQ1b0sJTksdsA9DvG"
    staff_id: "1yDGjR1S0fFTxCmQHwGeEvlUn9RAs51S7"

reports:
  timezone: "Europe/Podgorica"
  daily_send_hour_local: 3
  weekly_assessment_period_start: "2025-09-01"

  drive:
    root_folder_id: "1_PVTr7QhtD4Y0Np7NiVKFRVSZ3aznNGa"
  email:
    sender: "reports@adriaticcollege.com"
    cc_roles: []

  # Новый ежедневный отчёт учителей (только письма, без PDF)
  teacher_daily:
    subject: "Mojo _ Daily Reports"
    # Дни включения по локальному времени: Tue..Sat (опционально, для наглядности)
    enabled_weekdays_local: [2, 3, 4, 5, 6] # 1=Mon .. 7=Sun; здесь 2..6

  coordinator_daily_attendance:
    parent_folder_id: "1dsk_CUXZKzr0fA1ZsPdLm6X90gYvGReu"
    template_id: "1aRiIjrCY8bE32Jvqdub0SJPc7pGy7i1X"
    per_slide_max_rows: 30
    filename_pattern: "{date}_{programme}_coordinator_daily_attendance_report.pdf"

  coordinator_daily_assessment:
    parent_folder_id: "1dsk_CUXZKzr0fA1ZsPdLm6X90gYvGReu"
    template_id: "1P7cSQDCyT9h9DMNWVETGCpS8OCEFXk_B"
    per_slide_max_rows: 30
    filename_pattern: "{date}_{programme}_coordinator_daily_assessment_report.pdf"

  coordinator_weekly_attendance:
    parent_folder_id: "1YL_pqAGKnOA_bDFYjAc791L9QaLcPpaj"
    template_id: "14Rkdy0Fi-b9A8BAm6Nps4jBHFBLo-4O_"
    per_slide_max_rows: 30
    filename_pattern: "{date}_{programme}_coordinator_weekly_attendance_report.pdf"

  coordinator_weekly_assessment:
    parent_folder_id: "1YL_pqAGKnOA_bDFYjAc791L9QaLcPpaj"
    template_id: "1VUgHb4JXJFxpR6ieNamZrAFdzdrE7HlH"
    per_slide_max_rows: 30
    filename_pattern: "{date}_{programme}_coordinator_weekly_assessment_report.pdf"
  
  # Еженедельный отчёт учителя — Блок 1 (посещаемость за неделю, PDF)
  teacher_weekly_attendance:
    template_id: "1qeysx5BEqRg-ZRpcMbkdZd55UEN7WZGu"   # teacher_weekly_attendance_report.pptx
    parent_folder_id: "1kGyvGbVSEOBDyk8wPQqe2XNUkhUC6sKF" # mojo_reports/teacher_weekly_report
    per_slide_max_rows: 26
    filename_pattern: "{date2}_{teacher}_teacher_weekly_attendance.pdf"

  # Еженедельный отчёт учителя — Блок 2 (оценки без форм, за весь учебный период, PDF)
  teacher_weekly_assessment:
    template_id: "1t0SyVB8_9N0y-TWzcoqKOM2gqn2osCRb"   # teacher_weekly_assessment_report.pptx
    parent_folder_id: "1kGyvGbVSEOBDyk8wPQqe2XNUkhUC6sKF"
    per_slide_max_rows: 30
    filename_pattern: "{date2}_{teacher}_teacher_weekly_assessment.pdf"

  teacher_daily:
    subject: "Mojo _ Daily Reports"

google:
  rate_limits:
    gmail:
      max_messages_per_hour: 90 # безопасная «шапка»
      burst: 10 # не больше 10 подряд без паузы
      min_seconds_between_sends: 40
      max_consecutive_errors: 5

monitoring:
  etl_failure:
    enabled: true
    sender: "no-reply@adriaticcollege.com"
    notify_emails:
      - "aleksandr.kramer@adriaticcollege.com"
    subject: "Mojo Reports: ETL failure"
